<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>TheCarbtoon 개발일지 - 1 | SPRINGBOOT.KR</title>
<meta name="keywords" content="" />
<meta name="description" content="나는 최근 카툰을 볼 수 있는 서비스를 만들고 있다.
이름은 TheCarbToon.
스프링 클라우드를 사용해 서비스들을 묶어 개발을 진행 중이다.
|-------------------------------------------| | | | Auth(java)---\ | | | \ | | | \ | | User(java)-------------- Gateway(java) | | | / | | | | / | | | Media(kotlin)-/ | | | | | | | | | | | Discovery(java) ------------| | | | |-------------------------------------------| 현재 진행은 이러하고 서비스가 추가될 수도 있다고 생각한다.">
<meta name="author" content="">
<link rel="canonical" href="https://www.springboot.kr/posts/devnote/thecarbtoon-1/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.f238f1b0ccea21e45d3c0112bdd442ca592e7287c4a346036dc9a8b461e5f0a0.css" integrity="sha256-8jjxsMzqIeRdPAESvdRCylkucofEo0YDbcmotGHl8KA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.springboot.kr/favicon_io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.springboot.kr/favicon_io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.springboot.kr/favicon_io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.springboot.kr/favicon_io/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.springboot.kr/favicon_io/apple-touch-icon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.91.2" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PM2KLTYJRP"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-PM2KLTYJRP', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="TheCarbtoon 개발일지 - 1" />
<meta property="og:description" content="나는 최근 카툰을 볼 수 있는 서비스를 만들고 있다.
이름은 TheCarbToon.
스프링 클라우드를 사용해 서비스들을 묶어 개발을 진행 중이다.
|-------------------------------------------| | | | Auth(java)---\ | | | \ | | | \ | | User(java)-------------- Gateway(java) | | | / | | | | / | | | Media(kotlin)-/ | | | | | | | | | | | Discovery(java) ------------| | | | |-------------------------------------------| 현재 진행은 이러하고 서비스가 추가될 수도 있다고 생각한다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.springboot.kr/posts/devnote/thecarbtoon-1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-12T19:55:23&#43;08:00" />
<meta property="article:modified_time" content="2022-01-12T19:55:23&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="TheCarbtoon 개발일지 - 1"/>
<meta name="twitter:description" content="나는 최근 카툰을 볼 수 있는 서비스를 만들고 있다.
이름은 TheCarbToon.
스프링 클라우드를 사용해 서비스들을 묶어 개발을 진행 중이다.
|-------------------------------------------| | | | Auth(java)---\ | | | \ | | | \ | | User(java)-------------- Gateway(java) | | | / | | | | / | | | Media(kotlin)-/ | | | | | | | | | | | Discovery(java) ------------| | | | |-------------------------------------------| 현재 진행은 이러하고 서비스가 추가될 수도 있다고 생각한다."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://www.springboot.kr/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "TheCarbtoon 개발일지 - 1",
      "item": "https://www.springboot.kr/posts/devnote/thecarbtoon-1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "TheCarbtoon 개발일지 - 1",
  "name": "TheCarbtoon 개발일지 - 1",
  "description": "나는 최근 카툰을 볼 수 있는 서비스를 만들고 있다.\n이름은 TheCarbToon.\n스프링 클라우드를 사용해 서비스들을 묶어 개발을 진행 중이다.\n|-------------------------------------------| | | | Auth(java)---\\ | | | \\ | | | \\ | | User(java)-------------- Gateway(java) | | | / | | | | / | | | Media(kotlin)-/ | | | | | | | | | | | Discovery(java) ------------| | | | |-------------------------------------------| 현재 진행은 이러하고 서비스가 추가될 수도 있다고 생각한다.",
  "keywords": [
    
  ],
  "articleBody": "나는 최근 카툰을 볼 수 있는 서비스를 만들고 있다.\n이름은 TheCarbToon.\n스프링 클라우드를 사용해 서비스들을 묶어 개발을 진행 중이다.\n|-------------------------------------------| | | | Auth(java)---\\ | | | \\ | | | \\ | | User(java)-------------- Gateway(java) | | | / | | | | / | | | Media(kotlin)-/ | | | | | | | | | | | Discovery(java) ------------| | | | |-------------------------------------------| 현재 진행은 이러하고 서비스가 추가될 수도 있다고 생각한다.\n오늘이 이제 3일차가 되는 날인데 갑자기 일지를 작성하는 이유는 원래 프로젝트를 시작할 때 일지도 작성하면서 해야지 했는데 막상 시작하니 바쁘기도 하고 개발하느라 바빠서 적지 않았는데 오늘 갑자기 카프카 데이터를 처리하던 도중에 문뜩 생각이 들어 작성하게 됐다.\n일단 디스커버리와 게이트웨이까지는 얼추 된 것 같다.\n1,2일 차에 인증서버에서 발급된 토큰으로 필터에서 거르는 작업을 하느라 시간이 금방 간 거 같다.\n지금 진행 중인 부분은 인증과 유저 부분이고 인증 부분과 유저 부분을 분리해 따로 관리하려 한다.\n하지만 유저를 저장하는 DB는 인증과 유저에 따로 있고 인증은 몽고로 들어있고 유저는 mysql로 들어가 있다.\n이유는 인증 부분은 인증만 따로 처리하고 유저 관리는 유저 서비스에서만 하고 싶어서이다.\n인증 서비스에서 유저를 생성을 받고 생성이 되면 유저 서비스에서 똑같은 유저를 생성한다.\n그리고 토큰 발급을 제외한 나머지 유저와 관련된 API들은 전부 유저 서비스에서 관리하게 한다.\n물론 유저 서비스에서 변경된 사항들은 인증서버에도 적용되게 하려 한다.\n그래서 지금 인증 부분에서는 회원가입, 토큰 발급이 됐고 모든 서비스들은 인증에서 발급된 토큰으로 필터로 거른다.\n유저 서비스는 계속 다듬고 있는 중이고 계속 테스트를 진행 중이다.\n오늘은 여기까지만 해야겠다.\n나중에 개발이 다 끝나면 다 정리해서 올릴 생각이다.\n모든 코드는 여기에서 볼수있따\n- 끗 - ",
  "wordCount" : "250",
  "inLanguage": "en",
  "datePublished": "2022-01-12T19:55:23+08:00",
  "dateModified": "2022-01-12T19:55:23+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.springboot.kr/posts/devnote/thecarbtoon-1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "SPRINGBOOT.KR",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.springboot.kr/favicon_io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<header class="header">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang&display=swap" rel="stylesheet">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.springboot.kr/" accesskey="h" title="SPRINGBOOT.KR (Alt + H)">SPRINGBOOT.KR</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.springboot.kr/posts" title="posts">
                    <span>posts</span>
                </a>
            </li>
            <li>
                <a href="https://www.springboot.kr/search" title="search (Alt &#43; /)" accesskey=/>
                    <span>search</span>
                </a>
            </li>
            <li>
                <a href="https://www.springboot.kr/archives" title="archives">
                    <span>archives</span>
                </a>
            </li>
        </ul>
    </nav>
</header>

    <main class="main page">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.springboot.kr/">Home</a>&nbsp;»&nbsp;<a href="https://www.springboot.kr/posts/">Posts</a></div>
    <h1 class="post-title">
      TheCarbtoon 개발일지 - 1
    </h1>
    <div class="post-meta"><span title='2022-01-12 19:55:23 +0800 CST'>January 12, 2022</span>

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#--%eb%81%97--" aria-label="- 끗 -">- 끗 -</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        document.querySelector(`.inner ul li a[href="#${activeElement.getAttribute('id')}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
            if (element === activeElement ){
                document.querySelector(`.inner ul li a[href="#${element.getAttribute('id')}"]`).classList.add('active');
            } else {
                document.querySelector(`.inner ul li a[href="#${element.getAttribute('id')}"]`).classList.remove('active');
            }
        })
    }, false);

    
    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><p>나는 최근 카툰을 볼 수 있는 서비스를 만들고 있다.</p>
<p>이름은 <code>TheCarbToon</code>.</p>
<p>스프링 클라우드를 사용해 서비스들을 묶어 개발을 진행 중이다.</p>
<pre tabindex="0"><code>|-------------------------------------------|
|                                           |
|   Auth(java)---\                          |
|       |         \                         |
|       |          \                        |
|   User(java)-------------- Gateway(java)  |
|       |           /           |           |
|       |          /            |           |
|   Media(kotlin)-/             |           |
|       |                       |           |
|       |                       |           |
|   Discovery(java) ------------|           |
|                                           |
|-------------------------------------------|
</code></pre><p>현재 진행은 이러하고 서비스가 추가될 수도 있다고 생각한다.</p>
<p>오늘이 이제 3일차가 되는 날인데 갑자기 일지를 작성하는 이유는 원래 프로젝트를 시작할 때 일지도 작성하면서 해야지 했는데 막상 시작하니 바쁘기도 하고 개발하느라 바빠서 적지 않았는데 오늘 갑자기 카프카 데이터를 처리하던 도중에 문뜩 생각이 들어 작성하게 됐다.</p>
<p>일단 디스커버리와 게이트웨이까지는 얼추 된 것 같다.</p>
<p>1,2일 차에 인증서버에서 발급된 토큰으로 필터에서 거르는 작업을 하느라 시간이 금방 간 거 같다.</p>
<p>지금 진행 중인 부분은 인증과 유저 부분이고 인증 부분과 유저 부분을 분리해 따로 관리하려 한다.</p>
<p>하지만 유저를 저장하는 DB는 인증과 유저에 따로 있고 인증은 몽고로 들어있고 유저는 mysql로 들어가 있다.</p>
<p>이유는 인증 부분은 인증만 따로 처리하고 유저 관리는 유저 서비스에서만 하고 싶어서이다.</p>
<p>인증 서비스에서 유저를 생성을 받고 생성이 되면 유저 서비스에서 똑같은 유저를 생성한다.</p>
<p>그리고 토큰 발급을 제외한 나머지 유저와 관련된 API들은 전부 유저 서비스에서 관리하게 한다.</p>
<p>물론 유저 서비스에서 변경된 사항들은 인증서버에도 적용되게 하려 한다.</p>
<p>그래서 지금 인증 부분에서는 회원가입, 토큰 발급이 됐고 모든 서비스들은 인증에서 발급된 토큰으로 필터로 거른다.</p>
<p>유저 서비스는 계속 다듬고 있는 중이고 계속 테스트를 진행 중이다.</p>
<p>오늘은 여기까지만 해야겠다.</p>
<p>나중에 개발이 다 끝나면 다 정리해서 올릴 생각이다.</p>
<p>모든 코드는 <a href="https://github.com/TheCarbToon">여기에서</a> 볼수있따</p>
<h1 id="--끗--">- 끗 -<a hidden class="anchor" aria-hidden="true" href="#--끗--">#</a></h1>
<p><img loading="lazy" src="/images/letsgo/yesyesyes.gif" alt="let&amp;rsquo;sgo"  />
</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://www.springboot.kr/posts/spring/jpa-n-plus-1-problem-with-entity-graph/">
    <span class="title">« Prev Page</span>
    <br>
    <span>JPA N&#43;1문제와 @EntityGraph</span>
  </a>
  <a class="next" href="https://www.springboot.kr/posts/blahblah/the-dig/">
    <span class="title">Next Page »</span>
    <br>
    <span>어설픈 지식은 위험하다.</span>
  </a>
</nav>

  </footer><script src="https://utteranc.es/client.js"
        repo="nice7677/nice7677.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://www.springboot.kr/">SPRINGBOOT.KR</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
